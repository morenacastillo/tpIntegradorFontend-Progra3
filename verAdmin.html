<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/stylesAdmin.css">
        <link rel="icon" type="image" href="img/favicon/cara-de-gato-sin-boca.png">
        <!-- <script defer src="js/index.js"></script> -->

        <title>Duque's Music</title>
    </head>

    <body>

        <header>
            
            <div class="div-header-p-img">
                <img class="header-img" src="img/favicon/cara-de-gato-feliz.png" alt="">
                <p class="header-p">Duque's <span class="header-p-span">Music</span> / Administrador</p>
            </div>
            
            <nav>    
                <div class="nav-div">
                    <a class="nav-a" href="verAdmin.html">Ver</a>
                    <a class="nav-a" href="consultarAdmin.html">Consultar</a>
                    <a class="nav-a" href="crearAdmin.html">Crear</a>
                    <a class="nav-a" href="modificarAdmin.html">Modificar</a>
                    <a class="nav-a" href="eliminarAdmin.html">Eliminar</a>
                </div>
            </nav>


            
        </header>
        <main>
            
            <h1>Lista de productos</h1>
            <hr>
            <div id="contenedor-productos">
                
            </div>
        
        </main>

        <script>
           let contenedorProductos = document.getElementById("contenedor-productos")

            async function obtenerProductos() {
                let url = "http://localhost:3000/api/products"
                try{
                    let respuesta = await fetch("http://localhost:3000/api/products");
                    let data = await respuesta.json();

                    if(respuesta.ok){
                        let productos = await data.payload;
                        mostrarProductos(productos);

                    } else {
                        alert("Error obteniendo productos")
                    }

                } catch (error) {
                    
                }
            }

            function mostrarProductos(productos){
                let htmlProductos = "";
                productos.forEach(prod => {
                    htmlProductos += `
                    <div class="card-producto">
                        <img src="${prod.imagen}" alt="${prod.titulo}">
                        <h3>${prod.titulo}</h3>
                        <p>$${prod.precio}</p>
                        <p>${prod.tipo}</p>

                    </div>
                    `;
                    contenedorProductos.innerHTML = htmlProductos;
                });
            }

            function init() {
                obtenerProductos();
            } 
            
            init()
        </script>
        
        <footer>
            <p>Duque's Music</p>
        </footer>
        
    </body>
</html>